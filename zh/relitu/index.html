<div id="heatmap" style="
  max-width: 600px;
  height: 180px;
  padding: 2px;
  text-align: center;"
></div>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js"></script>
<script type="text/javascript">
  var chartDom = document.getElementById('heatmap');
  var myChart = echarts.init(chartDom);
  window.onresize = function() {
      myChart.resize();
  };
  var option;

  
  
  
  
  
  var dataMap = new Map();
  
    var key = "2024-02-28";
    var value = dataMap.get(key);
    var wordCount =  564 ;
    var link = "/zh/posts/math/ch3/3.5/";
    var title = "3.5 基变换与过渡矩阵";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "2024-02-28";
    var value = dataMap.get(key);
    var wordCount =  1796 ;
    var link = "/zh/posts/math/ch3/3.6/";
    var title = "3.6 子空间与商空间";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "2024-02-28";
    var value = dataMap.get(key);
    var wordCount =  199 ;
    var link = "/zh/posts/math/ch3/3.7/";
    var title = "3.7 矩阵的秩";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "2024-02-18";
    var value = dataMap.get(key);
    var wordCount =  3298 ;
    var link = "/zh/posts/math/ch3/3.4/";
    var title = "3.4 线性同构和几何问题代数化";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "2024-02-11";
    var value = dataMap.get(key);
    var wordCount =  565 ;
    var link = "/zh/posts/math/ch2/2.10/";
    var title = "2.10 分块初等变换与降阶公式";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "2024-02-11";
    var value = dataMap.get(key);
    var wordCount =  862 ;
    var link = "/zh/posts/math/ch2/2.11/";
    var title = "2.11 摄动法及其应用";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "2024-02-10";
    var value = dataMap.get(key);
    var wordCount =  2627 ;
    var link = "/zh/posts/math/ch3/3.3/";
    var title = "3.3 向量空间及其基础";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "2024-02-03";
    var value = dataMap.get(key);
    var wordCount =  149 ;
    var link = "/zh/posts/bug/";
    var title = "Hello World";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  0 ;
    var link = "/zh/posts/123/";
    var title = "122";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  688 ;
    var link = "/zh/posts/math/ch2/2.3/";
    var title = "2.3 矩阵的运算";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  584 ;
    var link = "/zh/posts/math/ch2/2.5/";
    var title = "2.5 初等变换及其应用";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  496 ;
    var link = "/zh/posts/math/ch2/2.6/";
    var title = "2.6 伴随矩阵";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  815 ;
    var link = "/zh/posts/math/ch2/2.7/";
    var title = "2.7 矩阵的迹";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  406 ;
    var link = "/zh/posts/math/ch2/2.8/";
    var title = "2.8 矩阵乘法与行列式的关系";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  4123 ;
    var link = "/zh/posts/math/ch3/3.2/";
    var title = "3.2 向量的线性关系";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  313 ;
    var link = "/zh/posts/bilibili/";
    var title = "test";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  2 ;
    var link = "/zh/posts/math/1.2/";
    var title = "降阶法";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  904 ;
    var link = "/zh/posts/math/ch2/2.4/";
    var title = "可逆矩阵";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
    var key = "0001-01-01";
    var value = dataMap.get(key);
    var wordCount =  504 ;
    var link = "/zh/posts/math/ch2/2.2/";
    var title = "特殊矩阵";
    
    
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }var data = [];
  
  for (const [key, value] of dataMap.entries()) {
    var sum = 0;
    for (const v of value) {
      sum += v.wordCount;
    }
    data.push([key, (sum / 1000).toFixed(1)]);
  }

  var startDate = new Date();
  var year_Mill = startDate.setFullYear((startDate.getFullYear() - 1));
  var startDate = +new Date(year_Mill);
  var endDate = +new Date();

  var dayTime = 3600 * 24 * 1000;
  startDate = echarts.format.formatTime('yyyy-MM-dd', startDate);
  endDate = echarts.format.formatTime('yyyy-MM-dd', endDate);

  
  function heatmap_width(months){             
    var startDate = new Date();
    var mill = startDate.setMonth((startDate.getMonth() - months));
    var endDate = +new Date();
    startDate = +new Date(mill);

    endDate = echarts.format.formatTime('yyyy-MM-dd', endDate);
    startDate = echarts.format.formatTime('yyyy-MM-dd', startDate);
    
    var showmonth = [];
    showmonth.push([
        startDate,
        endDate
    ]);
    return showmonth
  };

  function getRangeArr() {
    const windowWidth = window.innerWidth;
    if (windowWidth >= 600) {
      return heatmap_width(12);
    } else if (windowWidth >= 400) {
      return heatmap_width(9);
    } else {
      return heatmap_width(6);
    }
  }

  option = {
    title: {
        top: 0,
        left: 'center',
        text: '博客shit产量'
    },
    tooltip: {
      hideDelay: 1000,
      enterable: true,
      formatter: function (p) {
        const date = p.data[0];
        const posts = dataMap.get(date);
        var content = `${date}`;
        for (const [i, post] of posts.entries()) {
            content += "<br>";
            var link = post.link;
            var title = post.title;
            var wordCount = (post.wordCount / 1000).toFixed(1);
            content += `<a href="${link}" target="_blank">${title} | ${wordCount} 千字</a>`
        }
        return content;
      }
    },
    visualMap: {
        min: 0,
        max: 10,
        type: 'piecewise',
        orient: 'horizontal',
        left: 'center',
        top: 30,
        
        inRange: {   
          
          color: ['#7aa8744c', '#7AA874' ] 
        },
        splitNumber: 4,
        text: ['千字', ''],
        showLabel: true,
        itemGap: 20,
    },
    calendar: {
        top: 80,
        left: 20,
        right: 4,
        cellSize: ['auto', 12],
        range: getRangeArr(),
        itemStyle: {
            color: '#F1F1F1',
            borderWidth: 2.5,
            borderColor: '#fff',
        },
        yearLabel: { show: false },
        
        splitLine: {
          lineStyle: {
            color: 'rgba(0, 0, 0, 0.0)',
            
            
            
            
          }
        }
    },
    series: {
        type: 'heatmap',
        coordinateSystem: 'calendar',
        data: data,
    }
  };
  myChart.setOption(option);
  myChart.on('click', function(params) {
    if (params.componentType === 'series') {
      
      const post = dataMap.get(params.data[0])[0];
      const link = window.location.origin + post.link;
      window.open(link, '_blank').focus();
    }
});
</script> 
